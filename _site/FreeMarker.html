<!DOCTYPE html>
<html>

<head>
	<!-- meta information -->
<meta charset="utf-8">
<meta name="description" 
      content="Welcome to yashendaoren 的主页! - iOS开发 微信小程序开发 前端开发" >
<meta name="author" content="yashendaoren && Aigars Dzerviniks">

<!-- Enable responsiveness on mobile devices-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<!-- title -->
<title>FreeMarker &middot; yashendaoren 的主页</title>

<!-- icons -->
<link rel="shortcut icon" href="/assets/images/favicon.ico">

<!-- stylesheets -->
<link rel="stylesheet" href="/assets/css/responsive.gs.12col.css">
<link rel="stylesheet" href="/assets/css/animate.min.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/category.css"/>
<link rel="stylesheet" href="/assets/css/about.css"/>


<!-- Google fonts -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic&subset=latin-ext">


<!-- font Awesome -->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">


<!-- feed links -->
<link rel="alternate" href="http://localhost:4000/feed.xml" type="application/rss+xml" title="yashendaoren 的主页">

</head>

<body>
	<main class="container avocado">
		
			<header>
				
				<div>
					<a href="http://localhost:4000" id="logo" title="yashendaoren 的主页" style="background-image: url(/assets/images/logo.png);"></a>
				</div>

				<nav id="main-navigation">
  
  
  <a href="https://code.1004.fun/" title="Home">Home</a>
  
  
  
  <a href="https://code.1004.fun/category/" title="Category">Category</a>
  
  
  
  <a href="https://code.1004.fun/about/" title="about">about</a>
  
  
</nav>


			</header>

			
<div class="well article">
        <h2><a href="/FreeMarker">FreeMarker</a></h2>
        <span class="post-date">
            
            January-3-2019
        </span>
        <hr style="border-top:0px solid #28323C;"/>
    
    <div class="post-content">
    <h3 id="总体结构">总体结构</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Welcome!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;</span><span class="err">#</span><span class="na">--</span> <span class="na">Greet</span> <span class="na">the</span> <span class="na">user</span> <span class="na">with</span> <span class="na">his</span><span class="err">/</span><span class="na">her</span> <span class="na">name</span> <span class="na">--</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Welcome ${user}!<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>We have these animals:
        <span class="nt">&lt;ul&gt;</span>[BR]
        <span class="nt">&lt;</span><span class="err">#</span><span class="na">list</span> <span class="na">animals</span> <span class="na">as</span> <span class="na">animal</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li&gt;</span>${animal.name} for ${animal.price} Euros
        <span class="nt">&lt;/</span><span class="err">#</span><span class="nt">list&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div>

<h3 id="引入">引入</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>一个重要的规则就是路径不应该包含大写字母，
为了分隔词语， 使用下划线 _，就像 wml_form (而不是 wmlForm )。

&lt;#import "../../../include/layout_wap.ftl" as layout /&gt;
&lt;@layout.standard title="大点" cssMap={"app":"course/course_wap"}&gt;

    &lt;style&gt;
    // css
    &lt;/style&gt;
    &lt;script&gt;
    // js
    &lt;/script&gt;

&lt;/@layout.standard&gt;

</code></pre></div></div>

<h3 id="公用样式">公用样式</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#include "../include/position.ftl" /&gt;

</code></pre></div></div>

<h3 id="定义变量">定义变量</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#assign dk_list=[
    {"uid":"1","name":"曹雁飞","des":"曹雁飞，女，教育学原"},
    {"uid":"2","name":"曹雁飞","des":"曹雁飞，女，教育学原"},
    {"uid":"3","name":"曹雁飞","des":"曹雁飞，女，教育学原"},
] /&gt;

</code></pre></div></div>

<h3 id="列表">列表</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#list dk_list as item&gt;

    &lt;div class="celebrity-item"&gt;

        ${item_index}

        &lt;div class="celebrity-info"&gt;
            &lt;div onclick="gotoUserForJson(${item.title},${item.uid})"&gt;
                &lt;img src="https://avatar2.citysbs.com/m.gif"&gt;
            &lt;/div&gt;
            &lt;div class="celebrity-name"&gt;${item.name}&lt;/div&gt;
            &lt;div class="celebrity-introduce"&gt;${item.title}&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="celebrity-desc"&gt;
            &lt;div class="desc"&gt;
            ${item.des}
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/#list&gt;

</code></pre></div></div>
<h3 id="判断">判断</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#if centerHotText?? &amp;&amp; boardList?exists &amp;&amp; boardList?size gt 0 &gt;

&lt;#elseif board_index == 1 &gt;

&lt;#else&gt;

&lt;/#if&gt;

</code></pre></div></div>

<h3 id="内建函数">内建函数</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#function createUrl url params={}&gt;
    &lt;#assign tUrl = urlCollect.forumFrontDomainNoHttps+ url &gt;
    &lt;#if (params?size&gt;0)&gt;
        &lt;#assign tUrl = tUrl+"?"&gt;
        &lt;#assign keys = params?keys&gt;
        &lt;#list keys as key&gt;
            &lt;#assign tUrl = tUrl + key + "=" + params[key] + "&amp;"&gt;
        &lt;/#list&gt;
        &lt;#assign tUrl = tUrl?substring(0, tUrl?length-1)&gt;
    &lt;/#if&gt;
    &lt;#return tUrl&gt;
&lt;/#function&gt;

</code></pre></div></div>

<h3 id="表达式">表达式</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>字符串切分： 包含结尾： name[0..4]，
           不包含结尾： name[0..&lt;5]，
           基于长度(宽容处理)： name[0..*5]，
           去除开头： name[5..]

序列切分：包含结尾： products[20..29]， 
        不包含结尾： products[20..&lt;30]，
        基于长度(宽容处理)： products[20..*10]，
        去除开头： products[20..]
        
&lt;#list seq[1..3] as i&gt;${i}&lt;/#list&gt;

连接： passwords + { "joe": "secret42" }
&lt;#list ["Joe", "Fred"] + ["Julia", "Kate"] as user&gt;${user}&lt;/#list&gt;
&lt;#assign ages = {"Joe":23, "Fred":25} + {"Joe":30, "Julia":18}&gt;

内建函数： name?upper_case, path?ensure_starts_with('/')
方法调用： repeat("What", 3) 如：${repeat("Foo", 3)}


处理不存在的值：
默认值： name!"unknown" 或者 (user.name)!"unknown" 或者 name! 或者 (user.name)!
检测不存在的值： name?? 或者 (user.name)??
赋值操作： =, +=, -=, *=, /=, %=, ++, --

使用 &gt;= 和 &gt; 的时候有一点小问题。FreeMarker解释 &gt; 的时候可以把它当作FTL标签的结束符。
为了避免这种问题，可以使用 lt 代替 &lt;， lte 代替 &lt;=， gt 代替 &gt; 还有 gte 代替 &gt;=， 
例如 &lt;#if x gt y&gt;。
另外一个技巧是将表达式放到 圆括号 中， 尽管这么写并不优雅，
例如 &lt;#if (x &gt; y)&gt;。

</code></pre></div></div>

<h3 id="自定义指令">自定义指令</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#macro greet person color&gt;
    &lt;font size="+2" color="${color}"&gt;Hello ${person}!&lt;/font&gt;
&lt;/#macro&gt;

&lt;@greet&gt;&lt;/@greet&gt;

&lt;@greet color="black" person="Fred"/&gt;

</code></pre></div></div>

<h3 id="嵌套内容">嵌套内容</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//&lt;#nested&gt; 可以多次被调用

&lt;#macro do_thrice&gt;
    &lt;#nested&gt;
    &lt;#nested&gt;
    &lt;#nested&gt;
&lt;/#macro&gt;

&lt;@do_thrice&gt;
    Anything.
&lt;/@do_thrice&gt;

</code></pre></div></div>

<h3 id="空间命名">空间命名</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;#macro copyright date&gt;
    &lt;p&gt;Copyright (C) ${date} Julia Smith. All rights reserved.
    &lt;br&gt;Email: ${mail}&lt;/p&gt;
&lt;/#macro&gt;
&lt;#assign mail = "jsmith@acme.com"&gt;


&lt;#import "/lib/my_test.ftl" as my&gt;
&lt;#assign mail="fred@acme.com"&gt;
&lt;@my.copyright date="1999-2002"/&gt;

不一样
${my.mail} jsmith@acme.com
${mail} fred@acme.com


</code></pre></div></div>


    <hr style="border-top:0px solid #28323C;"/>

    <!-- tags and categories under post -->
    
    <ul class="list-unstyled list-inline">
      <li><i class="icon-folder-open"></i></li>
      
      
         
            <li class="icon-style"><a href="/categories.html">
                web开发 <span>(13)</span>
                
            </a></li>
        
      
    </ul>
      

    <!--    -->

    </div>
    
</div>
<div class="pagination">
    
    
    <a class="btn btn-default" href="/canvas" class="previous">下一篇</a>
    
</div>

			<footer>
				<p>
					This work is licensed under a
					<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/deed.en_US">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
				</p>
				<p>
					Powered by
					<a rel="license" target="_blank" href="https://jekyllrb.com">Jekyll</a> ,
					<a rel="license" target="_blank" href="https://github.com">Github</a> ,
					<a rel="license" target="_blank" href="https://code.1004.fun/">1004.FUN</a>
				</p>
			</footer>
	</main>
</body>

</html>